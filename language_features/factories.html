<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>Factories and Generators | Survive JavaScript - a Web Developer&#39;s Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.5.0">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
        
    
    
    <link rel="next" href="../language_features/properties.html" />
    
    
    <link rel="prev" href="../language_features/prototypes.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book" data-level="3.8" data-basepath=".." data-revision="1421520161902">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="a_misunderstood_language/README.html">
            
                
                    <a href="../a_misunderstood_language/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         A Misunderstood Language?
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="a_misunderstood_language/how_to_characterize.html">
            
                
                    <a href="../a_misunderstood_language/how_to_characterize.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         How to Characterize?
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.2" data-path="a_misunderstood_language/altjs.html">
            
                
                    <a href="../a_misunderstood_language/altjs.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                         AltJS
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1.3" data-path="a_misunderstood_language/conclusion.html">
            
                
                    <a href="../a_misunderstood_language/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="current_state/README.html">
            
                
                    <a href="../current_state/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Current State
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="current_state/might_run_on_toaster.html">
            
                
                    <a href="../current_state/might_run_on_toaster.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Might Run on Toaster
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="current_state/there_are_apis.html">
            
                
                    <a href="../current_state/there_are_apis.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         There are APIs and APIs
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="current_state/more_powerful.html">
            
                
                    <a href="../current_state/more_powerful.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         More Powerful, More Standard
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="current_state/hope_for_newbies.html">
            
                
                    <a href="../current_state/hope_for_newbies.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         Still Hope for Newbies
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="current_state/es6.html">
            
                
                    <a href="../current_state/es6.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         ES6 - The Future
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.6" data-path="current_state/conclusion.html">
            
                
                    <a href="../current_state/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="language_features/README.html">
            
                
                    <a href="../language_features/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Language Features
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="3.1" data-path="language_features/functions.html">
            
                
                    <a href="../language_features/functions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                         Functions
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.2" data-path="language_features/globals.html">
            
                
                    <a href="../language_features/globals.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                         Globals
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.3" data-path="language_features/partial.html">
            
                
                    <a href="../language_features/partial.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                         Partial Application
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.4" data-path="language_features/this.html">
            
                
                    <a href="../language_features/this.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                         What is `this`?
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.5" data-path="language_features/call_and_apply.html">
            
                
                    <a href="../language_features/call_and_apply.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                         Understanding `call` and `apply`
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.6" data-path="language_features/arguments.html">
            
                
                    <a href="../language_features/arguments.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                         Arguments are Fun
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.7" data-path="language_features/prototypes.html">
            
                
                    <a href="../language_features/prototypes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                         Prototypes are Phun?
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="3.8" data-path="language_features/factories.html">
            
                
                    <a href="../language_features/factories.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                         Factories and Generators
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.9" data-path="language_features/properties.html">
            
                
                    <a href="../language_features/properties.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                         Properties for Fun and Profit
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.10" data-path="language_features/data_types.html">
            
                
                    <a href="../language_features/data_types.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.10.</b>
                        
                         Data Types
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.11" data-path="language_features/hoisting.html">
            
                
                    <a href="../language_features/hoisting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.11.</b>
                        
                         Hoist the Sails!
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3.12" data-path="language_features/conclusion.html">
            
                
                    <a href="../language_features/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.12.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="common_problems/README.html">
            
                
                    <a href="../common_problems/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Common Problems
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="common_problems/globals.html">
            
                
                    <a href="../common_problems/globals.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Globals and Other Nasties
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="common_problems/function_syntax.html">
            
                
                    <a href="../common_problems/function_syntax.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         Function Syntax is Cumbersome
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="common_problems/variables.html">
            
                
                    <a href="../common_problems/variables.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         Variables and Arguments are `undefined` by Default
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="common_problems/pyramid.html">
            
                
                    <a href="../common_problems/pyramid.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         Pyramid of Doom
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.5" data-path="common_problems/not_all_things.html">
            
                
                    <a href="../common_problems/not_all_things.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                         Not All Things are Equal
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.6" data-path="common_problems/no_op_overloading.html">
            
                
                    <a href="../common_problems/no_op_overloading.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                         No Operator Overloading
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.7" data-path="common_problems/nih.html">
            
                
                    <a href="../common_problems/nih.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                         Not Invented Here
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.8" data-path="common_problems/conclusion.html">
            
                
                    <a href="../common_problems/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="modules/README.html">
            
                
                    <a href="../modules/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Modules
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="5.1" data-path="modules/anti.html">
            
                
                    <a href="../modules/anti.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                         The Anti-Pattern
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.2" data-path="modules/concat.html">
            
                
                    <a href="../modules/concat.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                         Concatenating to Victory
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.3" data-path="modules/amd.html">
            
                
                    <a href="../modules/amd.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                         AMD
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.4" data-path="modules/common.html">
            
                
                    <a href="../modules/common.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                         CommonJS
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.5" data-path="modules/umd.html">
            
                
                    <a href="../modules/umd.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                         UMD
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.6" data-path="modules/es6.html">
            
                
                    <a href="../modules/es6.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                         ES6
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.7" data-path="modules/package.html">
            
                
                    <a href="../modules/package.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                         Package Managers
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5.8" data-path="modules/conclusion.html">
            
                
                    <a href="../modules/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="testing/README.html">
            
                
                    <a href="../testing/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         Testing
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="testing/unit.html">
            
                
                    <a href="../testing/unit.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         Unit Testing
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2" data-path="testing/generative.html">
            
                
                    <a href="../testing/generative.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                         Generative Testing
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.3" data-path="testing/fibo.html">
            
                
                    <a href="../testing/fibo.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                         Fibonacci&#39;s Numbers Using `annotate`
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.4" data-path="testing/browser.html">
            
                
                    <a href="../testing/browser.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                         Browser Testing
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.5" data-path="testing/conclusion.html">
            
                
                    <a href="../testing/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="development_tools/README.html">
            
                
                    <a href="../development_tools/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Development Tools
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="development_tools/chrome.html">
            
                
                    <a href="../development_tools/chrome.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         Chrome Inspector and Firebug
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="development_tools/live.html">
            
                
                    <a href="../development_tools/live.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         LiveReload
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="development_tools/jslint.html">
            
                
                    <a href="../development_tools/jslint.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         JSLint and JSHint
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.4" data-path="development_tools/jsfiddle.html">
            
                
                    <a href="../development_tools/jsfiddle.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.4.</b>
                        
                         jsFiddle, jsbin, jsdo.it and co.
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.5" data-path="development_tools/online_ides.html">
            
                
                    <a href="../development_tools/online_ides.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.5.</b>
                        
                         Online IDEs
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.6" data-path="development_tools/conclusion.html">
            
                
                    <a href="../development_tools/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.6.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="build_systems/README.html">
            
                
                    <a href="../build_systems/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         Build Systems
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="build_systems/grunt.html">
            
                
                    <a href="../build_systems/grunt.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         Grunt
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="build_systems/conclusion.html">
            
                
                    <a href="../build_systems/conclusion.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         Conclusion
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="boilerplates/README.html">
            
                
                    <a href="../boilerplates/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         Boilerplates
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Survive JavaScript - a Web Developer&#39;s Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_42">
                    
                        <h1 id="factories-and-generators">Factories and Generators</h1>
<p>If you have used <code>Java</code> you have likely seen the joke about <code>AbstractSingletonProxyFactoryBean</code>. As it happens factories are actually an interesting way to construct specialized objects. JavaScript&#39;s closures enable us to create factories quite easily. This allows us to implement a pattern known as generator. In Python or some other language you might have bumped into <code>yield</code> keyword. That&#39;s what we&#39;re going to effectively implement next.</p>
<p>A generator is quite a simple thing really. It is just something that gives us a value when we poke it correctly. Let&#39;s get started with something very simple and generalize that later. The simplest possible generator I can think of generates just a series of same values (say 42). Here&#39;s an implementation of this particular case.</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numberGenerator</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> {
        next: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;
        }
    };
}

<span class="hljs-keyword">var</span> gen = numberGenerator();
<span class="hljs-built_in">console</span>.log(gen.next(), gen.next()); <span class="hljs-comment">// -&gt; 42 42</span>
</code></pre>
<p>As you can see we can get a nice series of 42&#39;s right now. That is only part of the story, though. We could parametrize the function as you might not want a 42 always. We could also take it a step further and make it use some rule. Let&#39;s say we want to get a series of n^2. Time to code!</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">powerGenerator</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">return</span> {
        next: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">var</span> ret = <span class="hljs-built_in">Math</span>.pow(i, <span class="hljs-number">2</span>);

            i++;

            <span class="hljs-keyword">return</span> ret;
        }
    };
}

<span class="hljs-keyword">var</span> gen = powerGenerator();
<span class="hljs-built_in">console</span>.log(gen.next(), gen.next(), gen.next()); <span class="hljs-comment">// -&gt; 0 1 4</span>
</code></pre>
<p>This example shows us the power of closures. As you can see, we store <code>i</code> at the outer scope of the object we actually operate on. It seems kind of trivial but it is one of those features of JavaScript it really pays off to understand as it allows us to implement all sorts of nifty little patterns such as this quite easily.</p>
<p>You can take the approach even further and generalize it. Since we might not want to operate on <code>pow</code> or squares always, we probably should define some sort of factory. I have done this below. As a bonus there&#39;s a cyclic one.</p>
<pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generator</span><span class="hljs-params">(valueCb, initial)</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> i = initial || <span class="hljs-number">0</span>;

        <span class="hljs-keyword">return</span> {
            next: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">var</span> ret = valueCb(i);

                i++;

                <span class="hljs-keyword">return</span> ret;
            }
        };
    }();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cycle</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> items = <span class="hljs-built_in">arguments</span>;

    <span class="hljs-keyword">return</span> generator(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{
        <span class="hljs-keyword">return</span> items[i % items.length];
    });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pows</span><span class="hljs-params">(n, initial)</span> </span>{
    <span class="hljs-keyword">return</span> generator(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(i)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.pow(i, n);
    }, initial);
}

<span class="hljs-keyword">var</span> color = cycle(<span class="hljs-string">'red'</span>, <span class="hljs-string">'green'</span>, <span class="hljs-string">'blue'</span>); <span class="hljs-comment">// red, green, blue, red, green, ...</span>

<span class="hljs-keyword">var</span> nums = pows(<span class="hljs-number">1</span>); <span class="hljs-comment">// 0, 1, 2, 3, ...</span>
<span class="hljs-keyword">var</span> squares = pows(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 4, 9, ...</span>
<span class="hljs-keyword">var</span> cubes = pows(<span class="hljs-number">3</span>); <span class="hljs-comment">// 0, 1, 8, 27, 64, ...</span>
</code></pre>
<p>I hope this example gave you some idea of the power of generators and factories. I know that especially the generator pattern isn&#39;t used a lot but at least it makes a perfect excuse of an example and helps you understand a bit about closures.</p>
<p>One problem of the approach has to do with the <code>next</code> method. It doesn&#39;t sit that well with existing iterators. You will likely need to implement some custom ones to deal with that. On the other hand the approach is lazy by definition. So no computation will be done unless you really mean it. Overall it is just one example of how to program <code>into</code> language rather than <code>in</code> language to quite McConnell of <code>Code Complete</code> fame.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../language_features/prototypes.html" class="navigation navigation-prev " aria-label="Previous page: Prototypes are Phun?"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../language_features/properties.html" class="navigation navigation-next " aria-label="Next page: Properties for Fun and Profit"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"ga":{"token":"UA-5272959-9","configuration":"auto"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-5272959-9', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
